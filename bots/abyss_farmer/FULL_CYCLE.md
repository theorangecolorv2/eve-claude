# Полный цикл работы Abyss Farmer

## Описание

Бот автоматически фармит абисс, чередуя два спота для безопасности.

## Алгоритм работы

### Цикл работы

1. **Варп на спот**
   - Клик ПКМ по букмарке (1 SPOT 1 или 2 SPOT 2)
   - Ожидание контекстного меню
   - Поиск кнопки "Перейти в варп режим"
   - Если кнопка не найдена:
     - Либо уже на споте
     - Либо меню не прогрузилось → повторная попытка
   - Клик по кнопке варпа
   - Ожидание 30-32 секунды

2. **Использование филамента**
   - Автоматическое открытие инвентаря
   - Активация фильтра !FILAMENT!
   - Поиск и использование филамента
   - Ожидание появления Cache (подтверждение входа в абисс)

3. **Зачистка абисса**
   - Прохождение 3 комнат (обычно)
   - Каждая комната:
     - Переключение на вкладку Main
     - Активация мид слотов
     - Аппроч к контейнеру
     - Выпуск дронов
     - Убийство первой цели в 35км
     - Уничтожение контейнера
     - Лут врека
     - Орбита гейта
     - Зачистка всех врагов
     - Возврат дронов
     - Прыжок через ворота

4. **Выход из абисса**
   - Автоматический выход после последней комнаты
   - Ожидание 8-9 секунд

5. **Переключение спота**
   - Если был на споте 1 → следующий цикл на споте 2
   - Если был на споте 2 → следующий цикл на споте 1

6. **Повтор цикла**
   - Цикл повторяется пока не кончатся филаменты

## Требования

### Букмарки

Должны быть созданы два букмарка с точными названиями:
- `1 SPOT 1` - первый спот
- `2 SPOT 2` - второй спот

### Вкладки Overview

- `Main` - для контейнера и гейта
- `PvP Foe` - для врагов

### Модули корабля

- Слот 1: Ракеты (верхний слот)
- Мид слоты: Должны быть активны
- Дроны: Должны быть в дрон-бее

### Инвентарь

- Филаменты в инвентаре
- Фильтр `!FILAMENT!` должен быть настроен

## Запуск

```bash
python scripts/run_abyss_farmer.py
```

При запуске можно выбрать тип филамента или использовать Calm Exotic по умолчанию.

## Логирование

Все действия логируются в файл `logs/abyss_farmer_YYYYMMDD_HHMMSS.log`

Логируется:
- Каждый шаг цикла
- Варпы на споты
- Вход в абисс
- Прохождение комнат
- Убийство врагов
- Лут
- Ошибки и предупреждения

## Статистика

После остановки бота выводится статистика:
- Всего циклов
- Всего комнат зачищено
- Время работы
- Среднее время цикла

## Остановка

- `Ctrl+C` - корректная остановка с выводом статистики
- Автоматическая остановка при окончании филаментов

## Безопасность

- Чередование спотов снижает риск обнаружения
- Случайные задержки между действиями
- Гуманизация движений мыши

## Обработка ошибок

### Кнопка варпа не найдена
- Повторная попытка клика по букмарке
- Если снова не найдена → считаем что уже на споте

### Филамент не использовался
- Возможно филаменты кончились
- Бот останавливается

### Cache не появился
- Возможно не вошли в абисс
- Цикл прерывается

### Комната не зачищена
- Логируется ошибка
- Цикл прерывается
- Статистика сохраняется

## Примечания

- Бот работает в бесконечном цикле пока есть филаменты
- Рекомендуется запускать с полным инвентарем филаментов
- Убедитесь что корабль настроен правильно перед запуском
- Проверьте что букмарки созданы с правильными названиями
