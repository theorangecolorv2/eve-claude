# Abyss Farmer Bot

Бот для автоматического фарма Abyss (Бездны) в EVE Online.
Использует **Sanderling** (чтение памяти) для получения состояния игры.

**Статус**: ✅ Полный цикл работы реализован.

## Быстрый старт

### 1. Подготовка в игре

**Букмарки** — создайте два букмарка с точными названиями:
- `1 SPOT 1`
- `2 SPOT 2`

**Вкладки Overview:**
- `Main` — контейнеры, гейты, остовы
- `PvP Foe` — только враги (NPC)

> Бот ищет вкладки по частичному совпадению, игнорируя HTML-теги и спецсимволы.
> Например, `<color=red>✥ PvP Foe</color>` будет найдена по запросу "PvP Foe".

**Корабль:**
- Слот 1: Ракеты (верхний слот)
- Мид слоты: активные модули
- Дроны в дрон-бее

**Инвентарь:**
- Филаменты в карго
- Фильтр `!FILAMENT!` настроен (показывает только филаменты)

### 2. Запуск

```bash
python scripts/run_abyss_farmer.py
```

При запуске выберите тип филамента или Enter для Calm Exotic.

### 3. Остановка

`Ctrl+C` — корректная остановка с выводом статистики.

## Алгоритм работы

Бот работает в бесконечном цикле, чередуя два спота:

1. **Варп на спот** — ПКМ по букмарке → "Warp to" → ожидание 30-32 сек
2. **Вход в абисс** — открытие инвентаря → фильтр !FILAMENT! → использование филамента → ожидание Cache
3. **Зачистка 3 комнат** — в каждой комнате:
   - Переключение на `Main`, аппроч к контейнеру
   - Активация мид слотов, выпуск дронов
   - Убийство первой цели в 35км
   - Уничтожение контейнера, лут врека
   - Орбита гейта, зачистка врагов
   - Возврат дронов, прыжок через ворота
4. **Выход из абисса** — автоматический, ожидание 8-9 сек
5. **Переключение спота** (1↔2) и повтор цикла

## Структура модулей

```
bots/abyss_farmer/
├── main.py              # Основной цикл бота (AbyssFarmer class)
├── enter.py             # Вход в абисс (инвентарь, филамент)
├── room_new.py          # Прохождение комнаты (default_room)
├── room_detector.py     # Определение типа комнаты
├── room_knight.py       # Обработчик комнаты Knight
├── room_tessera.py      # Обработчик комнаты Tessera
├── room_vila.py         # Обработчик комнаты Vila
├── room_overmind.py     # Обработчик комнаты Overmind
├── cache.py             # Работа с контейнерами (аппроч, лут)
└── config.json          # Конфигурация
```

## Тестирование

```bash
python scripts/test_abyss_enter.py     # Тест входа в абисс
python scripts/test_abyss_room.py      # Тест прохождения комнаты
python scripts/test_abyss_combat.py    # Тест боевой системы
```

## Логи

Все действия логируются в `logs/abyss_farmer_YYYYMMDD_HHMMSS.log`.

## Troubleshooting

| Проблема | Решение |
|----------|---------|
| Не находит букмарку | Проверьте названия: `1 SPOT 1`, `2 SPOT 2` (с пробелами) |
| Не может использовать филамент | Проверьте фильтр `!FILAMENT!` и наличие филаментов |
| Не находит врагов | Проверьте вкладку `PvP Foe` в Overview |
| Не находит контейнер | Проверьте вкладку `Main` в Overview |
