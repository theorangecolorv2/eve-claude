# Abyss Farmer Bot

Бот для автоматического фарма Abyss (Бездны) в EVE Online.

## Статус

✅ **Полный цикл работы реализован** - варп, вход, зачистка, выход, повтор.

## Возможности

- ✅ **Полный автоматический цикл**: варп → вход в абисс → зачистка → выход → варп
- ✅ Автоматический вход в Abyss через филамент
- ✅ Прохождение комнат с зачисткой врагов
- ✅ Лут контейнеров и остовов
- ✅ Чередование спотов для безопасности
- ✅ Работа до окончания филаментов
- ✅ Статистика работы

## Быстрый старт

```bash
python scripts/run_abyss_farmer.py
```

## Требования

### Букмарки
Должны быть созданы два букмарка с точными названиями:
- `1 SPOT 1` - первый спот для варпа
- `2 SPOT 2` - второй спот для варпа

### Вкладки Overview
- `Main` - для контейнера и гейта
- `PvP Foe` - для врагов

### Корабль
- Слот 1: Ракеты (верхний слот)
- Мид слоты: Должны быть активны
- Дроны: Должны быть в дрон-бее

### Инвентарь
- Филаменты в инвентаре
- Фильтр `!FILAMENT!` настроен

## Структура модулей

```
bots/abyss_farmer/
├── main.py              # Основной цикл бота (НОВОЕ)
├── enter.py             # Вход в абисс
├── room_new.py          # Прохождение комнаты (default room)
├── room_*.py            # Специализированные обработчики комнат
├── cache.py             # Работа с контейнерами
├── config.json          # Конфигурация
├── FULL_CYCLE.md        # Описание полного цикла (НОВОЕ)
├── USAGE.md             # Руководство по использованию
└── README.md            # Документация
```

### Модули

**`main.py`** - Основной цикл бота (НОВОЕ)
- Полный автоматический цикл
- Варп на споты
- Вход в абисс
- Зачистка комнат
- Чередование спотов
- Статистика

**`enter.py`** - Вход в абисс
- Открытие инвентаря
- Активация фильтра
- Использование филамента

**`room_new.py`** - Прохождение комнаты (default room)
- Переключение вкладок
- Активация модулей
- Аппроч к контейнеру
- Управление дронами
- Убийство врагов
- Лут
- Прыжок через ворота

**`cache.py`** - Работа с контейнерами
- Поиск контейнера
- Аппроч
- Атака
- Лут врека

## Алгоритм работы

### Полный цикл

1. **Варп на спот**
   - Клик ПКМ по букмарке (1 SPOT 1 или 2 SPOT 2)
   - Поиск кнопки "Перейти в варп режим"
   - Ожидание 30-32 секунды

2. **Использование филамента**
   - Автоматическое открытие инвентаря
   - Активация фильтра !FILAMENT!
   - Использование филамента
   - Ожидание появления Cache

3. **Зачистка абисса**
   - Прохождение 3 комнат (обычно)
   - Каждая комната:
     - Аппроч к контейнеру
     - Выпуск дронов
     - Убийство первой цели
     - Уничтожение контейнера
     - Лут врека
     - Орбита гейта
     - Зачистка всех врагов
     - Возврат дронов
     - Прыжок через ворота

4. **Выход из абисса**
   - Автоматический выход
   - Ожидание 8-9 секунд

5. **Переключение спота**
   - Спот 1 → Спот 2
   - Спот 2 → Спот 1

6. **Повтор цикла**
   - Пока не кончатся филаменты

## Запуск

### Основной скрипт

```bash
python scripts/run_abyss_farmer.py
```

При запуске можно выбрать тип филамента.

### Тестирование отдельных функций

```bash
# Тест входа в абисс
python scripts/test_abyss_enter.py

# Тест прохождения комнаты
python scripts/test_default_room.py

# Тест боя
python scripts/test_abyss_combat.py
```

## Логирование

Все действия логируются в `logs/abyss_farmer_YYYYMMDD_HHMMSS.log`

Логируется:
- Каждый шаг цикла
- Варпы на споты
- Вход в абисс
- Прохождение комнат
- Убийство врагов
- Лут
- Ошибки и предупреждения

## Статистика

После остановки бота выводится:
- Всего циклов
- Всего комнат зачищено
- Время работы
- Среднее время цикла

## Остановка

- `Ctrl+C` - корректная остановка с выводом статистики
- Автоматическая остановка при окончании филаментов

## Документация

- [FULL_CYCLE.md](FULL_CYCLE.md) - Полное описание цикла работы бота
- [USAGE.md](USAGE.md) - Подробное руководство по использованию
- [QUICK_START_ROOM.md](QUICK_START_ROOM.md) - Быстрый старт для прохождения комнат
- [SETUP_TABS.md](SETUP_TABS.md) - Настройка вкладок Overview

## Безопасность

- Чередование спотов снижает риск обнаружения
- Случайные задержки между действиями
- Гуманизация движений мыши

## Обработка ошибок

- Повторные попытки при неудаче
- Логирование всех ошибок
- Корректная остановка при критических ошибках
- Сохранение статистики

## Roadmap

### Фаза 1: Базовая функциональность ✅
- ✅ Вход в абисс
- ✅ Прохождение комнаты
- ✅ Базовый лут

### Фаза 2: Полный цикл ✅
- ✅ Варп на споты
- ✅ Чередование спотов
- ✅ Автоматический цикл
- ✅ Статистика

### Фаза 3: Оптимизация (в работе)
- [ ] Улучшенный лут
- [ ] Управление щитами
- [ ] Обработка разных типов комнат

### Фаза 4: Интеграция
- [ ] Telegram уведомления
- [ ] Автоматический запуск
- [ ] Веб-интерфейс
