# Abyss Farmer - Готов к использованию! 🚀

## Что реализовано

✅ **Полный автоматический цикл работы бота**

### Основные возможности

1. **Варп на споты**
   - Автоматический клик ПКМ по букмаркам
   - Поиск кнопки "Перейти в варп режим"
   - Ожидание завершения варпа (30-32 сек)
   - Обработка ошибок (повторные попытки)

2. **Вход в абисс**
   - Автоматическое открытие инвентаря
   - Активация фильтра !FILAMENT!
   - Использование филамента
   - Проверка входа (ожидание Cache)

3. **Зачистка абисса**
   - Прохождение 3 комнат
   - Аппроч к контейнеру
   - Управление дронами (выпуск/возврат)
   - Убийство врагов (лок + ракеты + дроны)
   - Лут контейнеров и остовов
   - Орбита гейта
   - Прыжок через ворота

4. **Выход и повтор**
   - Автоматический выход из абисса
   - Ожидание 8-9 секунд
   - Варп на другой спот
   - Чередование спотов (1 → 2 → 1 → 2...)

5. **Статистика и логирование**
   - Подсчет циклов и комнат
   - Время работы
   - Среднее время цикла
   - Детальные логи всех действий

## Структура файлов

```
bots/abyss_farmer/
├── main.py              # ⭐ Основной цикл бота (НОВОЕ)
├── enter.py             # Вход в абисс
├── room_new.py          # Прохождение комнаты
├── cache.py             # Работа с контейнерами
├── FULL_CYCLE.md        # ⭐ Описание цикла (НОВОЕ)
├── QUICKSTART.md        # ⭐ Быстрый старт (НОВОЕ)
├── USAGE.md             # Руководство
└── README.md            # ⭐ Обновленная документация

scripts/
└── run_abyss_farmer.py  # ⭐ Скрипт запуска (НОВОЕ)
```

## Быстрый старт

### 1. Подготовка (5 минут)

Создайте букмарки:
- `1 SPOT 1`
- `2 SPOT 2`

Настройте вкладки Overview:
- `Main` (контейнеры + ворота)
- `PvP Foe` (только враги)

Подготовьте корабль:
- Слот 1: Ракеты
- Мид слоты: Активны
- Дроны: В дрон-бее
- Филаменты: В инвентаре

### 2. Запуск (1 минута)

```bash
python scripts/run_abyss_farmer.py
```

Выберите филамент или нажмите Enter для Calm Exotic.

### 3. Работа

Бот автоматически:
- Варпнет на спот
- Войдет в абисс
- Зачистит комнаты
- Выйдет и варпнет на другой спот
- Повторит цикл пока есть филаменты

### 4. Остановка

`Ctrl+C` - корректная остановка с выводом статистики

## Алгоритм работы

```
┌─────────────────────────────────────────┐
│  СТАРТ (на споте или в космосе)         │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  1. ВАРП НА СПОТ                        │
│  - ПКМ по букмарке (1 SPOT 1/2 SPOT 2) │
│  - Клик "Перейти в варп режим"          │
│  - Ожидание 30-32 сек                   │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  2. ИСПОЛЬЗОВАНИЕ ФИЛАМЕНТА             │
│  - Открыть инвентарь                    │
│  - Активировать фильтр !FILAMENT!       │
│  - Использовать филамент                │
│  - Ждать появления Cache                │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  3. ЗАЧИСТКА АБИССА (3 комнаты)         │
│                                         │
│  Для каждой комнаты:                    │
│  - Аппроч к контейнеру                  │
│  - Выпуск дронов                        │
│  - Убийство первой цели (≤35км)         │
│  - Уничтожение контейнера               │
│  - Лут врека                            │
│  - Орбита гейта                         │
│  - Зачистка всех врагов                 │
│  - Возврат дронов                       │
│  - Прыжок через ворота                  │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  4. ВЫХОД ИЗ АБИССА                     │
│  - Автоматический выход                 │
│  - Ожидание 8-9 сек                     │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  5. ПЕРЕКЛЮЧЕНИЕ СПОТА                  │
│  - Спот 1 → Спот 2                      │
│  - Спот 2 → Спот 1                      │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│  ПОВТОР ЦИКЛА                           │
│  (пока есть филаменты)                  │
└─────────────────────────────────────────┘
```

## Логирование

Все действия логируются в:
```
logs/abyss_farmer_YYYYMMDD_HHMMSS.log
```

Логируется:
- Каждый шаг цикла
- Варпы на споты
- Использование филаментов
- Прохождение комнат
- Убийство врагов
- Лут
- Ошибки и предупреждения

## Статистика

После остановки выводится:
```
============================================================
=== СТАТИСТИКА ===
Всего циклов: 10
Всего комнат: 30
Время работы: 125.5 мин
Среднее время цикла: 12.6 мин
============================================================
```

## Безопасность

- ✅ Чередование спотов (снижает риск обнаружения)
- ✅ Случайные задержки между действиями
- ✅ Гуманизация движений мыши
- ✅ Обработка ошибок и повторные попытки

## Обработка ошибок

### Кнопка варпа не найдена
→ Повторная попытка клика по букмарке
→ Если снова не найдена: считаем что уже на споте

### Филамент не использовался
→ Возможно филаменты кончились
→ Бот останавливается с выводом статистики

### Cache не появился
→ Возможно не вошли в абисс
→ Цикл прерывается

### Комната не зачищена
→ Логируется ошибка
→ Цикл прерывается
→ Статистика сохраняется

## Документация

- **[QUICKSTART.md](bots/abyss_farmer/QUICKSTART.md)** - Быстрый старт (5 минут)
- **[FULL_CYCLE.md](bots/abyss_farmer/FULL_CYCLE.md)** - Полное описание цикла
- **[USAGE.md](bots/abyss_farmer/USAGE.md)** - Подробное руководство
- **[README.md](bots/abyss_farmer/README.md)** - Общая документация

## Что дальше?

### Возможные улучшения

1. **Telegram уведомления**
   - Уведомление о начале/конце цикла
   - Уведомление об ошибках
   - Статистика в реальном времени

2. **Улучшенный лут**
   - Фильтрация лута по ценности
   - Автоматическая продажа

3. **Управление щитами**
   - Автоматическая активация репа
   - Мониторинг HP

4. **Обработка разных типов комнат**
   - Vila, Overmind, Knight, Tessera
   - Специализированные стратегии

5. **Веб-интерфейс**
   - Мониторинг в реальном времени
   - Управление ботом через браузер

## Тестирование

Все компоненты протестированы:
- ✅ Вход в абисс
- ✅ Прохождение комнаты
- ✅ Бой с врагами
- ✅ Лут
- ✅ Работа с букмарками

## Готово к использованию! 🎉

Бот полностью функционален и готов к работе.

Запускайте и фармите абисс автоматически!

```bash
python scripts/run_abyss_farmer.py
```
